@using System.Web.UI.WebControls
@using DevExpress.Utils
@using DevExpress.Web
@using DevExpress.Web.ASPxThemes
@using DevExpress.Web.Mvc.UI

@model Bps.BpsBase.Entities.Concrete.MH.MHHSPL

@{
    Layout = null;
}

@Html.DevExpress().PopupControl(
    settings =>
    {
        settings.Name = "ppmuhHspPlnEkle";
        settings.Width = 750;
        settings.AllowDragging = true;
        settings.CloseAction = CloseAction.CloseButton;
        settings.CloseOnEscape = true;
        settings.PopupAnimationType = AnimationType.None;
        settings.HeaderText = "Hesap Planı " + (Model.Id > 0 ? "Düzenle" : "Ekle");
        settings.ShowOnPageLoad = true;
        settings.Modal = true;
        settings.AutoUpdatePosition = true;
        settings.PopupHorizontalAlign = PopupHorizontalAlign.WindowCenter;
        settings.PopupVerticalAlign = PopupVerticalAlign.WindowCenter;
        settings.ShowFooter = true;

        settings.SetContent(() =>
        {
            @Html.DevExpress().FormLayout(formLayoutsettings =>
            {
                formLayoutsettings.Name = "formMuhHspPlnEkle";
                formLayoutsettings.SettingsAdaptivity.AdaptivityMode = FormLayoutAdaptivityMode.SingleColumnWindowLimit;
                formLayoutsettings.SettingsAdaptivity.SwitchToSingleColumnAtWindowInnerWidth = 576;

                formLayoutsettings.Items.AddGroupItem(g =>
                {
                    g.Caption = "Hesap Planı Detayı";
                    g.ColCount = 2;
                    g.Paddings.Padding = Unit.Pixel(0);
                    g.Paddings.PaddingTop = Unit.Pixel(10);
                    g.GroupBoxDecoration = GroupBoxDecoration.HeadingLine;
                    g.GroupBoxStyle.Caption.Font.Bold = true;
                    g.GroupBoxStyle.Caption.Font.Size = 16;
                    g.GroupBoxStyle.Caption.CssClass = "groupCaption";

                    g.Items.Add(m => m.Id, i =>
                    {
                        i.NestedExtension().TextBox(s =>
                        {
                            s.Name = "Id";
                        });
                        i.ClientVisible = false;
                    });

                    g.Items.Add(m => m.SIRKID, i =>
                    {
                        i.NestedExtension().TextBox(s =>
                        {
                            s.Name = "SIRKID";
                        });
                        i.ClientVisible = false;
                    });

                    g.Items.Add(m => m.EKKULL, i =>
                    {
                        i.NestedExtension().TextBox(s =>
                        {
                            s.Name = "EKKULL";
                        });
                        i.ClientVisible = false;
                    });

                    g.Items.Add(m => m.ETARIH, i =>
                    {
                        i.NestedExtension().TextBox(s =>
                        {
                            s.Name = "ETARIH";
                        });
                        i.ClientVisible = false;
                    });



                    g.Items.Add(m => m.HSPKOD, i =>
                    {
                        i.NestedExtension().TextBox(s =>
                        {
                            s.Name = "HSPKOD";
                            s.ShowModelErrors = true;
                            s.Properties.ValidationSettings.Display = Display.Dynamic;
                        });
                    });



                    g.Items.Add(m => m.HSPTNM, i =>
                    {
                        i.NestedExtension().TextBox(s =>
                        {
                            s.Name = "HSPTNM";
                            s.ShowModelErrors = true;
                            s.Properties.ValidationSettings.Display = Display.Dynamic;
                        });
                    });

                    g.Items.Add(m => m.HSPTKD, i =>
                    {
                        i.CaptionSettings.AssociatedNestedExtensionName = "HSPTKD";
                        i.SetNestedContent(() =>
                        {
                            Html.RenderAction("TipHrkCmbPartial", "Tanim", new { area = "GN", tipKod = "030", harKod = Model.HSPTKD, cmbName = "HSPTKD" });
                        });
                    });
                

                g.Items.Add(m => m.DVCNKD, i =>
                {
                    i.CaptionSettings.AssociatedNestedExtensionName = "DVCNKD";
                    i.SetNestedContent(() =>
                    {
                        Html.RenderAction("TipHrkCmbPartial", "Tanim", new { area = "GN", tipKod = "031", harKod = Model.DVCNKD, cmbName = "DVCNKD" });
                    });
                });

                g.Items.Add(m => m.KURFLG);

                g.Items.Add(m => m.SRMFLG);

                g.Items.Add(m => m.DAVBCM);

                g.Items.Add(m => m.DGSKKD, i =>
                {
                    i.CaptionSettings.AssociatedNestedExtensionName = "DGSKKD";
                    i.SetNestedContent(() =>
                    {
                        Html.RenderAction("TipHrkCmbPartial", "Tanim", new { area = "GN", tipKod = "032", harKod = Model.DGSKKD, cmbName = "DGSKKD" });
                    });
                });

                g.Items.Add(m => m.MGRKOD);

                g.Items.Add(m => m.KDVDKD, i =>
                {
                    i.CaptionSettings.AssociatedNestedExtensionName = "KDVDKD";
                    i.SetNestedContent(() =>
                    {
                        Html.RenderAction("TipHrkCmbPartial", "Tanim", new { area = "GN", tipKod = "033", harKod = Model.KDVDKD, cmbName = "KDVDKD" });
                    });
                });

                g.Items.Add(m => m.ENFFLG);

                g.Items.Add(m => m.KMZKOD);
                g.Items.Add(m => m.HSKFLG);

                g.Items.Add(m => m.ACTIVE, i =>
                {
                    i.NestedExtension().CheckBox(s =>
                    {
                        s.Name = "ACTIVE";
                        s.Checked = true;
                    });
                });
            });
        }).Bind(Model).Render();
    });

    settings.SetFooterTemplateContent(c =>
    {
        Html.DevExpress().FormLayout(formLayoutsettings =>
        {
            formLayoutsettings.Name = "footerFormLayout";
            formLayoutsettings.Width = Unit.Percentage(100);
            formLayoutsettings.Items.AddGroupItem(g =>
            {
                g.GroupBoxDecoration = GroupBoxDecoration.None;
                g.HorizontalAlign = FormLayoutHorizontalAlign.Right;
                g.Items.Add(i => { i.ShowCaption = DefaultBoolean.False; }).SetNestedContent(() =>
                {
                    //ViewContext.Writer.Write("<div class='buttonsContainer'>");
                    Html.DevExpress().Button(s =>
                    {
                        s.Name = "submitMuhHspPlnKaydet";
                        s.Width = Unit.Pixel(100);
                        s.ControlStyle.CssClass = "buttonAlign";
                        s.Text = "Kaydet";
                        s.Images.Image.IconID = IconID.SaveSave16x16;
                        //s.UseSubmitBehavior = true;
                        s.ClientSideEvents.Click = "FormMuhHspPlnKaydet";
                    }).Render();

                    Html.DevExpress().Button(s =>
                    {
                        s.Name = "cancel";
                        s.Width = Unit.Pixel(100);
                        s.ControlStyle.CssClass = "cancelButton";
                        s.Text = "İptal";
                        s.ClientSideEvents.Click = "function (s, e) { ppmuhHspPlnEkle.Hide(); }";
                        s.Images.Image.IconID = IconID.ActionsCancel16x16;
                    }).Render();
                    //ViewContext.Writer.Write("</div>");
                });
            });
        }).Bind(Model).Render();
    });
}).GetHtml()
