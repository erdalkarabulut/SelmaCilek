@using Bps.BpsBase.Entities.Concrete.ST
@using DevExpress.Data

@model IEnumerable<STNAME>
@{
    Html.EnableClientValidation();
    Html.EnableUnobtrusiveJavaScript();
}
@(Html.DevExpress().GridView<STNAME>(settings =>
{
    settings.Name = "gridStDilTanim";
    settings.Width = Unit.Percentage(100);
    settings.CallbackRouteValues = new { Controller = "Tanim", Action = "StokDilTanimGp" };
    //settings.SettingsEditing.BatchUpdateRouteValues = new { Controller = "Takvim", Action = "BatchEditingUpdateModel" };

    settings.SettingsResizing.ColumnResizeMode = ColumnResizeMode.Disabled;
    settings.Settings.ShowFilterRow = false;
    settings.Settings.ShowHeaderFilterButton = false;
    //settings.SettingsBehavior.AllowDragDrop = false;
    settings.SettingsBehavior.AllowGroup = false;
    settings.SettingsBehavior.AllowSort = false;

    settings.SettingsEditing.Mode = GridViewEditingMode.Batch;
    settings.SettingsEditing.BatchEditSettings.EditMode = GridViewBatchEditMode.Cell;
    settings.SettingsEditing.BatchEditSettings.StartEditAction = GridViewBatchStartEditAction.Click;
    settings.SettingsEditing.BatchEditSettings.HighlightDeletedRows = true;
    settings.SettingsEditing.BatchEditSettings.KeepChangesOnCallbacks = DefaultBoolean.True;
    settings.Height = 594;

    settings.CommandColumn.Visible = true;
    settings.CommandColumn.ShowCancelButton = true;
    settings.CommandColumn.ShowDeleteButton = true;
    settings.CommandColumn.ShowNewButtonInHeader = true;
    settings.CommandColumn.ShowCancelButton = true;
    settings.CommandButtonInitialize = (sender, e) =>
    {
        if ((e.ButtonType == ColumnCommandButtonType.Update))
        {
            e.Visible = false;
        }
    };
    settings.CommandColumn.Width = Unit.Pixel(150);

    settings.KeyFieldName = "Id";

    settings.Columns.Add(m=>m.STKNAM,c =>
    {
        c.FieldName = "STKNAM";
        c.ColumnType = MVCxGridViewColumnType.TextBox;
        var prop = (TextEditProperties)c.PropertiesEdit;  
        prop.ValidationSettings.RequiredField.IsRequired = true;  
        prop.ValidationSettings.CausesValidation = true;  
    });

    settings.Columns.Add(c =>
    {
        c.FieldName = "LANGKD";
        c.ColumnType = MVCxGridViewColumnType.ComboBox;
        c.EditorProperties().ComboBox(p =>
        {
            p.TextField = "TANIMI";
            p.ValueField = "HARKOD";
            p.ValueType = typeof(string);
            p.BindList(ViewData["DilList"]);
        });
    });

    settings.CellEditorInitialize = (s, e) =>
    {
        ASPxEdit editor = (ASPxEdit)e.Editor;
        editor.ValidationSettings.Display = Display.None;
    };

}).Bind(Model).GetHtml())
