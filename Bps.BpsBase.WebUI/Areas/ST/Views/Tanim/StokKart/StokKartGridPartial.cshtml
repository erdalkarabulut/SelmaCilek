@using Bps.BpsBase.Entities.Concrete.ST
@using Bps.Core.Web.Model
@model List<STKART>

@{
    Html.DevExpress().GridView<STKART>(settings =>
    {
        settings.Name = "gridStokKart";
        settings.KeyFieldName = "Id";
        settings.CallbackRouteValues = new {Controller = "Tanim", Action = "StokKartGridPartial"};
        settings.ClientSideEvents.BeginCallback = "function(s,e){" +
                                                  "e.customArgs['menuTag'] =" + ((ProjeMenuListed) ViewData["YetkiModel"]).MNUTAG + ";" +
                                                  "e.customArgs['malzemeTur'] = cmb_StokKart_MalTur.GetValue();" +
                                                  "}";
        var toolParam = new DevToolBarParam()
        {
            Grid = settings.Name,
            EkleUrl = Url.Action("StokKartEkleWindow", "Tanim", new {area = "ST"}),
            DegistirUrl = Url.Action("StokKartEkleWindow", "Tanim", new {area = "ST"}),
            SilUrl = Url.Action("StokKartSil", "Tanim", new {area = "ST"}),
            EklePopup = "",
            DegistirPopup = "",
            EkleDiv = "",
            DegistirDiv = "",
            YerlesimDiv = "stokLayoutDiv",
            BelgeAkisDiv = "stokBelgeAkisDiv",
            TopluAktarDiv = "stokTopluAktDiv",
            MenuTag = ((ProjeMenuListed) ViewData["YetkiModel"]).MNUTAG,
            Type = "STKART",
            ExcluldeList = new List<string>() { "tb_Add", "tb_Edit" },
            ItemList = new List<MVCxGridViewToolbarItem>()
        };

        var yetki = (ProjeMenuListed) ViewData["YetkiModel"];
        #region Toolbar

        var addButton = new MVCxGridViewToolbarItem();
        addButton.Text = "Ekle";
        addButton.Name = "tb_Add";
        addButton.Enabled = yetki.EKLEME == 1;
        addButton.Command = GridViewToolbarCommand.Custom;
        addButton.NavigateUrl = @"javascript:stokKart.Ekle(" + toolParam.MenuTag + ",'" + toolParam.EkleUrl + "')";
        addButton.Image.IconID = IconID.ActionsNew16x16;

        var editButton = new MVCxGridViewToolbarItem();
        editButton.Text = "Değiştir";
        editButton.Name = "tb_Edit";
        editButton.Enabled = yetki.DEGIST == 1;
        editButton.Command = GridViewToolbarCommand.Custom;
        editButton.NavigateUrl = @"javascript:stokKart.Degistir('" + toolParam.Grid + "', " + toolParam.MenuTag + ", '" + toolParam.DegistirUrl + "')";
        editButton.Image.IconID = IconID.ActionsEdit16x16devav;

        var backButton = new MVCxGridViewToolbarItem();
        backButton.Text = "Geri";
        backButton.Name = "tb_Back";
        backButton.Command = GridViewToolbarCommand.Custom;
        backButton.NavigateUrl = @"javascript:pageControlStokKart.SetActiveTabIndex(0);";
        backButton.Image.IconID = IconID.NavigationBackward16x16;

        toolParam.ItemList.Add(addButton);
        toolParam.ItemList.Add(editButton);
        toolParam.ItemList.Add(backButton);

        @Html.Action("ToolBar", "Main", new
        {
            area = "",
            settings,
            yetki = (ProjeMenuListed)ViewData["YetkiModel"],
            toolParam = toolParam
        });

        #endregion

        #region Columns

        settings.Columns.Add(column =>
        {
            column.FieldName = "Id";
            column.Visible = false;
        });

        settings.Columns.Add(m => m.STANKD, column =>
        {
            column.MaxWidth = 2000;
            column.MinWidth = 150;
            column.Width = Unit.Percentage(10);
            column.Visible = true;
            var prop = (EditProperties)column.PropertiesEdit;
            prop.ValidationSettings.RequiredField.IsRequired = true;

            column.EditorProperties().ComboBox(p =>
            {
                p.TextField = "TANIMI";
                p.ValueField = "HARKOD";
                p.ValueType = typeof(string);
                p.BindList(ViewData["StokAnaGrupList"]);
            });
        });

        settings.Columns.Add(m => m.STALKD, column =>
        {
            column.MaxWidth = 2000;
            column.MinWidth = 150;
            column.Width = Unit.Percentage(10);
            column.Visible = true;
            var prop = (EditProperties)column.PropertiesEdit;
            prop.ValidationSettings.RequiredField.IsRequired = true;

            column.EditorProperties().ComboBox(p =>
            {
                p.TextField = "TANIMI";
                p.ValueField = "HARKOD";
                p.ValueType = typeof(string);
                p.BindList(ViewData["StokAltGrupList"]);
            });
        });

        settings.Columns.Add(m => m.OLCUKD, column =>
        {
            column.MaxWidth = 2000;
            column.MinWidth = 150;
            column.Width = Unit.Percentage(10);
            column.Visible = true;
            var prop = (EditProperties)column.PropertiesEdit;
            prop.ValidationSettings.RequiredField.IsRequired = true;
            column.EditorProperties().ComboBox(p =>
            {
                p.TextField = "TANIMI";
                p.ValueField = "HARKOD";
                p.ValueType = typeof(string);
                p.BindList(ViewData["OlcuList"]);
            });
        });

        settings.Columns.Add(m => m.SAOLKD, column =>
        {
            column.MaxWidth = 2000;
            column.MinWidth = 150;
            column.Width = Unit.Percentage(10);
            column.Visible = true;
            var prop = (EditProperties)column.PropertiesEdit;
            prop.ValidationSettings.RequiredField.IsRequired = true;
            column.EditorProperties().ComboBox(p =>
            {
                p.TextField = "TANIMI";
                p.ValueField = "HARKOD";
                p.ValueType = typeof(string);
                p.BindList(ViewData["OlcuList"]);
            });
        });

        settings.Columns.Add(m => m.MALGKD, column =>
        {
            column.MaxWidth = 2000;
            column.MinWidth = 150;
            column.Width = Unit.Percentage(10);
            column.Visible = true;
            var prop = (EditProperties)column.PropertiesEdit;
            prop.ValidationSettings.RequiredField.IsRequired = true;
            column.EditorProperties().ComboBox(p =>
            {
                p.TextField = "TANIMI";
                p.ValueField = "HARKOD";
                p.ValueType = typeof(string);
                p.BindList(ViewData["MalGrupList"]);
            });
        });

        settings.Columns.Add(m => m.AGOLKD, column =>
        {
            column.MaxWidth = 2000;
            column.MinWidth = 150;
            column.Width = Unit.Percentage(10);
            column.Visible = true;
            var prop = (EditProperties)column.PropertiesEdit;
            prop.ValidationSettings.RequiredField.IsRequired = true;
            column.EditorProperties().ComboBox(p =>
            {
                p.TextField = "TANIMI";
                p.ValueField = "HARKOD";
                p.ValueType = typeof(string);
                p.BindList(ViewData["OlcuList"]);
            });
        });

        settings.Columns.Add(m => m.HCOLKD, column =>
        {
            column.MaxWidth = 2000;
            column.MinWidth = 150;
            column.Width = Unit.Percentage(10);
            column.Visible = true;
            var prop = (EditProperties)column.PropertiesEdit;
            prop.ValidationSettings.RequiredField.IsRequired = true;
            column.EditorProperties().ComboBox(p =>
            {
                p.TextField = "TANIMI";
                p.ValueField = "HARKOD";
                p.ValueType = typeof(string);
                p.BindList(ViewData["OlcuList"]);
            });
        });

        settings.Columns.Add(m => m.EANTKD, column =>
        {
            column.MaxWidth = 2000;
            column.MinWidth = 150;
            column.Width = Unit.Percentage(10);
            column.Visible = true;
            var prop = (EditProperties)column.PropertiesEdit;
            prop.ValidationSettings.RequiredField.IsRequired = true;
            column.EditorProperties().ComboBox(p =>
            {
                p.TextField = "TANIMI";
                p.ValueField = "HARKOD";
                p.ValueType = typeof(string);
                p.BindList(ViewData["EanTipList"]);
            });
        });

        settings.Columns.Add(m => m.UGYBKD, column =>
        {
            column.MaxWidth = 2000;
            column.MinWidth = 150;
            column.Width = Unit.Percentage(10);
            column.Visible = true;
            var prop = (EditProperties)column.PropertiesEdit;
            prop.ValidationSettings.RequiredField.IsRequired = true;
            column.EditorProperties().ComboBox(p =>
            {
                p.TextField = "TANIMI";
                p.ValueField = "HARKOD";
                p.ValueType = typeof(string);
                p.BindList(ViewData["OlcuList"]);
            });
        });


        //settings.Columns.Add(m => m.STKODU, column =>
        //{
        //    column.Caption = "Stok Adı";
        //    column.EditorProperties().ComboBox(p =>
        //    {
        //        p.TextField = "STKNAM";
        //        p.ValueField = "STKODU";
        //        p.ValueType = typeof(string);
        //        p.BindList(ViewData["StokNameList"]);
        //    });
        //});


        #endregion

        List<string> excludeList = new List<string>();
        excludeList.Add("HCOLKD");
        excludeList.Add("UGYBKD");
        excludeList.Add("EANTKD");
        excludeList.Add("AGOLKD");
        excludeList.Add("MALGKD");
        excludeList.Add("SAOLKD");
        excludeList.Add("OLCUKD");
        excludeList.Add("STALKD");
        excludeList.Add("STANKD");
        GridViewHelper<STKART>.Settings(settings, new STKART(), excludeList);
    }).Bind(Model).Render();
}
<div id="stokLayoutDiv">
</div>
<div id="stokBelgeAkisDiv">
</div>
<div id="stokTopluAktDiv">
</div>